# SC2 Replay Analyzer

A desktop replay manager for StarCraft II built with Python, Tkinter, and `sc2reader`.

It helps you scan replay folders, classify games, tag builds, detect proxy patterns, and review match history with filters and stats.

## Highlights
- Multi-folder replay indexing (`.SC2Replay`)
- Fast cache-aware scans (manual full scan + startup/watch delta checks)
- Filters by matchup, folder, race, player count, player name, map, tags, favorites, and proxy-only
- Build order workflow:
  - auto-detected tech sequence per player
  - manual override per replay
  - step-by-step tech filter
- Tags and favorites (single or multi-selection actions)
- Startup/new-game popup to review new matches and edit tags/favorite immediately
- CSV import/export
- Built-in stats window
- GUI + CLI

## Project Structure
- `sc2replaytool/app.py`: Tkinter GUI
- `sc2replaytool/cli.py`: command line interface
- `sc2replaytool/core/indexer.py`: replay scanning/indexing
- `sc2replaytool/core/tags.py`: tags/favorites/build-order metadata
- `run_app.py`: GUI launcher
- `make_installer.ps1`: Windows release build helper
- `make_install_debug.ps1`: Windows debug build helper

## Requirements
- Python 3.10+
- `pip`

Dependencies are listed in `requirements.txt`:
- `sc2reader`
- `mpyq`

## Local Setup
From repo root:

```bash
python -m venv .venv
source .venv/bin/activate   # Linux/macOS
# .venv\Scripts\Activate.ps1  # Windows PowerShell
pip install -r requirements.txt
```

## Run
### GUI
```bash
python run_app.py
```

Alternative:
```bash
python -m sc2replaytool.app
```

### CLI
Examples:
```bash
python -m sc2replaytool.cli --replays /path/to/replays --scan
python -m sc2replaytool.cli --list --matchup PvT
python -m sc2replaytool.cli --list --player Maru --map "Cosmic Sapphire"
python -m sc2replaytool.cli --list --proxy --export-csv /tmp/replays.csv
python -m sc2replaytool.cli --replays /path/to/replays --scan --proxy-threshold 35
```

## Data Storage
The app stores index/settings/tags in platform data directories:

- Windows: `%APPDATA%\\SC2ReplayAnalyzer\\data\\`
- Linux: `${XDG_DATA_HOME:-~/.local/share}/sc2replayanalyzer/`

Key files:
- `replay_index.json`
- `replay_tags.json`
- `settings.json`

## Build (Windows)
For Windows, there are two different outputs:
- standalone app executable (`dist\\SC2ReplayAnalyzer.exe`) via PyInstaller
- installer executable (`dist\\SC2ReplayAnalyzer-Setup.exe`) via Inno Setup

### Release build helper
```powershell
.\make_installer.ps1
```

### Debug build helper
```powershell
.\make_install_debug.ps1
```

Both scripts:
- create/use `.venv`
- install dependencies + `pyinstaller`
- build with `sc2replaytool/ico/sc2ra.ico`

### Inno Setup (installer packaging)
If you only need the standalone app executable, Inno Setup is **not** required.

If you want a classic Windows installer (`...-Setup.exe`), install Inno Setup and compile `installer.iss` generated by `make_installer.ps1`.

## Notes
- Replay folder names can be customized in the UI (`Name` + `Save Name`); empty name falls back to full path.
- Auto Watch is configurable and disabled by default on first launch.
- Startup check is delta-oriented (focus on newly discovered replays).

## Troubleshooting
### `mpyq` missing
Install dependencies in your active environment:

```bash
pip install -r requirements.txt
```

### `PyInstaller` missing
```bash
pip install pyinstaller
```

### Icon looks blurry
Use a high-quality multi-size `.ico` in `sc2replaytool/ico/sc2ra.ico` before building.

## License
Apache 2.0 (`LICENSE`).
